<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Drativasta">
<meta name="theme-color" content="#4A7C2F">
<meta name="description" content="AI-powered farming intelligence: weather, soil & plant health">
<title>Drativasta</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;800&display=swap" rel="stylesheet">
<script>
(function(){
  const m={name:"Drativasta",short_name:"Drativasta",start_url:"/",display:"standalone",
    background_color:"#0F1A0A",theme_color:"#4A7C2F",orientation:"portrait-primary",
    icons:[{src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect width='192' height='192' rx='40' fill='%234A7C2F'/><text y='140' x='96' text-anchor='middle' font-size='120'>üåø</text></svg>",sizes:"192x192",type:"image/svg+xml",purpose:"any maskable"}]};
  const b=new Blob([JSON.stringify(m)],{type:'application/json'});
  const l=document.createElement('link');l.rel='manifest';l.href=URL.createObjectURL(b);
  document.head.appendChild(l);
})();
if('serviceWorker' in navigator){
  const sw=`const C='drativasta-v4';
  self.addEventListener('install',e=>{e.waitUntil(caches.open(C).then(c=>c.addAll(['/'])));self.skipWaiting();});
  self.addEventListener('activate',e=>{e.waitUntil(caches.keys().then(ks=>Promise.all(ks.filter(k=>k!==C).map(k=>caches.delete(k)))));self.clients.claim();});
  self.addEventListener('fetch',e=>{if(e.request.url.includes('googleapis')||e.request.url.includes('fonts'))return;
  e.respondWith(fetch(e.request).then(r=>{const c=r.clone();caches.open(C).then(ca=>ca.put(e.request,c));return r;}).catch(()=>caches.match(e.request).then(r=>r||caches.match('/'))));});`;
  navigator.serviceWorker.register(URL.createObjectURL(new Blob([sw],{type:'application/javascript'}))).catch(()=>{});
}
</script>
<style>
:root{
  --moss:#4A7C2F;--sage:#8FB573;--leaf:#6aad4a;--wheat:#D4A843;
  --cream:#F5EED8;--dark:#0F1A0A;--dark2:#141f0d;
  --card:rgba(245,238,216,.055);--border:rgba(143,181,115,.18);
  --safe-top:env(safe-area-inset-top,0px);--safe-bot:env(safe-area-inset-bottom,0px);
}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%;font-family:'Syne',sans-serif;background:var(--dark);color:var(--cream);overscroll-behavior:none}
body{display:flex;flex-direction:column;overflow:hidden}
body::before{content:'';position:fixed;inset:0;pointer-events:none;z-index:0;
  background:radial-gradient(ellipse at 15% 40%,rgba(45,74,30,.5) 0%,transparent 55%),
             radial-gradient(ellipse at 85% 15%,rgba(107,66,38,.35) 0%,transparent 50%),
             radial-gradient(ellipse at 55% 85%,rgba(74,124,47,.25) 0%,transparent 50%)}

/* TOP BAR */
.top-bar{position:fixed;top:0;left:0;right:0;z-index:100;
  padding:calc(var(--safe-top) + 12px) 16px 12px;
  background:rgba(15,26,10,.9);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
  border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.brand{display:flex;align-items:center;gap:9px}
.brand-icon{width:36px;height:36px;background:linear-gradient(135deg,var(--moss),var(--leaf));
  border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:19px;
  box-shadow:0 3px 12px rgba(74,124,47,.4);flex-shrink:0}
.brand-name{font-size:20px;font-weight:800;
  background:linear-gradient(120deg,var(--sage),var(--wheat));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent}
.brand-sub{font-family:'Space Mono',monospace;font-size:8px;color:rgba(143,181,115,.5);
  letter-spacing:1.5px;text-transform:uppercase;margin-top:1px}
.top-actions{display:flex;gap:6px;align-items:center}
.top-btn{background:rgba(143,181,115,.1);border:1px solid var(--border);border-radius:8px;
  color:var(--sage);font-family:'Space Mono',monospace;font-size:9px;letter-spacing:.5px;
  padding:6px 9px;cursor:pointer;transition:all .2s;white-space:nowrap}
.top-btn:active{background:rgba(143,181,115,.22)}

/* LANGUAGE SELECTOR */
.lang-select{background:rgba(0,0,0,.4);border:1px solid var(--border);border-radius:8px;
  color:var(--sage);font-family:'Space Mono',monospace;font-size:9px;letter-spacing:.5px;
  padding:6px 8px;cursor:pointer;outline:none}
.lang-select option{background:var(--dark2);font-size:13px}

/* SCROLL */
.scroll-area{flex:1;overflow-y:auto;overflow-x:hidden;position:relative;z-index:1;
  padding-top:calc(var(--safe-top) + 64px);padding-bottom:calc(var(--safe-bot) + 70px);
  -webkit-overflow-scrolling:touch}

/* PANELS */
.panel{display:none;padding:14px 14px 6px;animation:fadeUp .3s ease}
.panel.active{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

/* CARDS */
.card{background:var(--card);border:1px solid var(--border);border-radius:18px;padding:18px;
  backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);margin-bottom:12px}
.card-label{font-family:'Space Mono',monospace;font-size:9px;color:var(--sage);
  letter-spacing:2px;text-transform:uppercase;margin-bottom:14px}

/* INPUTS */
input[type=text],input[type=number],input[type=password],select,textarea{
  width:100%;background:rgba(0,0,0,.3);border:1px solid var(--border);border-radius:11px;
  color:var(--cream);font-family:'Syne',sans-serif;font-size:16px;padding:12px 14px;
  outline:none;transition:border-color .2s,box-shadow .2s;-webkit-appearance:none}
input::placeholder,textarea::placeholder{color:rgba(245,238,216,.25)}
input:focus,select:focus,textarea:focus{border-color:var(--sage);box-shadow:0 0 0 3px rgba(143,181,115,.12)}
select option{background:var(--dark2)}
.input-row{display:flex;gap:8px;margin-bottom:10px}

/* BUTTONS */
.btn{border:none;border-radius:13px;font-family:'Syne',sans-serif;font-size:14px;font-weight:700;
  cursor:pointer;transition:all .2s;padding:13px 20px;display:flex;align-items:center;
  justify-content:center;gap:6px;-webkit-appearance:none}
.btn-primary{background:linear-gradient(135deg,var(--moss),#366222);color:var(--cream);
  box-shadow:0 4px 16px rgba(74,124,47,.35);width:100%}
.btn-primary:active{transform:scale(.97);box-shadow:none}
.btn-primary:disabled{opacity:.4;cursor:not-allowed;transform:none}
.btn-ghost{background:rgba(143,181,115,.08);border:1px solid var(--border);color:var(--sage);flex:1}
.btn-ghost:active{background:rgba(143,181,115,.18)}

/* BADGE */
.badge{display:inline-flex;align-items:center;gap:4px;background:rgba(143,181,115,.08);
  border:1px solid rgba(143,181,115,.18);border-radius:20px;padding:4px 10px;
  font-size:10px;color:var(--sage);font-family:'Space Mono',monospace;margin-bottom:12px;letter-spacing:.3px}

/* MODE TOGGLE */
.mode-toggle{display:flex;gap:5px;background:rgba(0,0,0,.25);border:1px solid var(--border);
  border-radius:13px;padding:4px;margin-bottom:14px}
.mode-btn{flex:1;padding:9px;border:none;border-radius:9px;font-family:'Syne',sans-serif;
  font-size:12px;font-weight:700;cursor:pointer;transition:all .25s;
  background:transparent;color:rgba(245,238,216,.4)}
.mode-btn.active{background:linear-gradient(135deg,var(--moss),#366222);color:var(--cream);
  box-shadow:0 2px 10px rgba(74,124,47,.3)}

/* WEATHER */
.weather-hero{text-align:center;padding:12px 0 6px}
.w-emoji{font-size:64px;line-height:1;margin-bottom:6px}
.w-temp{font-size:56px;font-weight:800;line-height:1;
  background:linear-gradient(135deg,var(--cream),var(--wheat));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent}
.w-cond{font-size:16px;color:var(--sage);margin-top:5px;font-weight:600}
.w-loc{font-family:'Space Mono',monospace;font-size:10px;color:rgba(245,238,216,.38);margin-top:4px}
.stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:7px;margin-top:14px}
.stat-box{background:rgba(0,0,0,.2);border:1px solid var(--border);border-radius:12px;padding:10px 6px;text-align:center}
.stat-lbl{font-family:'Space Mono',monospace;font-size:8px;color:rgba(245,238,216,.35);
  letter-spacing:1px;text-transform:uppercase;margin-bottom:3px}
.stat-val{font-size:16px;font-weight:800;color:var(--wheat)}
.forecast-scroll{display:flex;gap:6px;overflow-x:auto;padding-bottom:4px;margin-top:4px;scrollbar-width:none}
.forecast-scroll::-webkit-scrollbar{display:none}
.fc-day{flex-shrink:0;background:rgba(0,0,0,.2);border:1px solid var(--border);border-radius:12px;
  padding:10px 12px;text-align:center;min-width:66px}
.fc-d{font-family:'Space Mono',monospace;font-size:8px;color:rgba(245,238,216,.4);letter-spacing:.5px}
.fc-i{font-size:20px;margin:5px 0}
.fc-h{font-size:13px;font-weight:800;color:var(--wheat)}
.fc-l{font-size:10px;color:rgba(245,238,216,.35);margin-top:1px}
.agri-tip{background:linear-gradient(135deg,rgba(45,74,30,.4),rgba(74,124,47,.15));
  border:1px solid rgba(143,181,115,.22);border-radius:12px;padding:12px 14px;
  margin-top:12px;font-size:12px;line-height:1.65;color:var(--sage)}
.agri-tip strong{color:var(--cream)}
.section-hdr{font-family:'Space Mono',monospace;font-size:9px;color:var(--sage);
  letter-spacing:2px;text-transform:uppercase;margin:14px 0 8px;
  display:flex;align-items:center;gap:6px}
.section-hdr::after{content:'';flex:1;height:1px;background:var(--border)}

/* SOIL */
.soil-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px}
.fg label{display:block;font-family:'Space Mono',monospace;font-size:9px;color:var(--sage);
  letter-spacing:1.5px;text-transform:uppercase;margin-bottom:5px}

/* PLANT/SOIL CAM */
.capture-row{display:flex;gap:8px;margin-bottom:12px}
.preview-img{width:100%;border-radius:12px;display:none;margin-bottom:8px;max-height:260px;object-fit:cover}
.cap-source{font-family:'Space Mono',monospace;font-size:9px;color:var(--sage);
  letter-spacing:1.5px;margin-bottom:10px;display:none}

/* CAMERA MODAL */
.cam-modal{display:none;position:fixed;inset:0;z-index:500;background:#000;
  flex-direction:column;align-items:center;justify-content:space-between;
  padding:calc(var(--safe-top) + 10px) 14px calc(var(--safe-bot) + 20px)}
.cam-modal.open{display:flex}
.cam-modal video{width:100%;flex:1;object-fit:cover;border-radius:18px;background:#111;max-height:72vh}
.cam-hint{font-family:'Space Mono',monospace;font-size:9px;color:rgba(255,255,255,.35);
  letter-spacing:2px;text-align:center;margin:8px 0 4px}
.cam-controls{display:flex;align-items:center;justify-content:center;gap:22px;padding-top:12px;width:100%}
.shutter{width:68px;height:68px;border-radius:50%;background:var(--cream);border:5px solid var(--sage);
  cursor:pointer;transition:transform .12s;box-shadow:0 0 0 7px rgba(143,181,115,.15);flex-shrink:0}
.shutter:active{transform:scale(.88)}
.cam-btn-c{width:46px;height:46px;border-radius:50%;border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.08);color:#fff;font-size:17px;cursor:pointer;
  display:flex;align-items:center;justify-content:center;flex-shrink:0}
.cam-btn-c:active{background:rgba(255,255,255,.2)}
canvas{display:none}

/* LOADER */
.loader{display:none;text-align:center;padding:24px}
.loader.on{display:block}
.spinner{width:36px;height:36px;border:3px solid var(--border);border-top-color:var(--sage);
  border-radius:50%;animation:spin .7s linear infinite;margin:0 auto 10px}
.loader-txt{font-family:'Space Mono',monospace;font-size:10px;letter-spacing:2px;
  color:rgba(143,181,115,.6);animation:pulse 1.4s ease-in-out infinite}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes pulse{0%,100%{opacity:.4}50%{opacity:1}}

/* RESULT */
.result-box{background:rgba(0,0,0,.2);border:1px solid rgba(143,181,115,.18);border-radius:14px;
  padding:16px;margin-top:10px;font-size:13px;line-height:1.8;white-space:pre-wrap;display:none}
.result-box.on{display:block;animation:fadeUp .3s ease}

/* BOTTOM NAV */
.bottom-nav{position:fixed;bottom:0;left:0;right:0;z-index:100;
  background:rgba(15,26,10,.92);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
  border-top:1px solid var(--border);display:flex;
  padding:6px 6px calc(var(--safe-bot) + 6px)}
.nav-btn{flex:1;display:flex;flex-direction:column;align-items:center;gap:3px;padding:7px 4px;
  cursor:pointer;border:none;background:transparent;border-radius:12px;transition:all .2s}
.nav-btn .ni{font-size:20px;transition:transform .2s}
.nav-btn .nl{font-family:'Space Mono',monospace;font-size:8px;letter-spacing:.8px;
  color:rgba(245,238,216,.35);text-transform:uppercase;transition:color .2s}
.nav-btn.active .nl{color:var(--sage)}
.nav-btn.active .ni{transform:scale(1.12);filter:drop-shadow(0 0 6px rgba(143,181,115,.5))}
.nav-btn.active{background:rgba(143,181,115,.07)}

/* SETUP SCREEN */
.setup-screen{display:none;position:fixed;inset:0;z-index:400;
  background:rgba(10,18,7,.98);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);
  flex-direction:column;align-items:center;justify-content:center;
  padding:32px 22px;text-align:center;overflow-y:auto}
.setup-screen.show{display:flex}
.setup-logo{font-size:56px;margin-bottom:14px;animation:float 3s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-7px)}}
.setup-title{font-size:26px;font-weight:800;margin-bottom:4px;
  background:linear-gradient(120deg,var(--sage),var(--wheat));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent}
.setup-sub{font-family:'Space Mono',monospace;font-size:9px;color:rgba(143,181,115,.45);
  letter-spacing:2.5px;margin-bottom:6px;text-transform:uppercase}
.free-badge{display:inline-flex;align-items:center;gap:5px;
  background:linear-gradient(135deg,rgba(74,124,47,.25),rgba(45,74,30,.25));
  border:1px solid rgba(143,181,115,.35);border-radius:20px;
  padding:5px 14px;font-size:11px;color:var(--sage);font-family:'Space Mono',monospace;
  margin:14px 0 22px;letter-spacing:.8px}
.setup-steps{width:100%;max-width:340px;margin-bottom:20px;text-align:left}
.step{display:flex;gap:10px;align-items:flex-start;margin-bottom:13px}
.step-n{width:26px;height:26px;border-radius:50%;background:linear-gradient(135deg,var(--moss),#2d4a1e);
  display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:800;
  flex-shrink:0;margin-top:1px;box-shadow:0 2px 8px rgba(74,124,47,.3)}
.step-t{font-size:12px;line-height:1.6;color:rgba(245,238,216,.75)}
.step-t a{color:var(--sage);text-decoration:none;font-weight:700}
.setup-div{width:100%;max-width:340px;height:1px;background:var(--border);margin:4px 0 18px}
.setup-iw{width:100%;max-width:340px;margin-bottom:8px;position:relative}
.setup-iw input{padding-right:46px;letter-spacing:.8px}
.eye-btn{position:absolute;right:12px;top:50%;transform:translateY(-50%);
  background:none;border:none;color:rgba(245,238,216,.35);font-size:16px;cursor:pointer;padding:4px}
.setup-hint{font-size:10px;color:rgba(245,238,216,.25);font-family:'Space Mono',monospace;
  margin-bottom:20px;line-height:1.7;max-width:320px}
.setup-save-btn{background:linear-gradient(135deg,var(--moss),#366222);color:var(--cream);
  border:none;border-radius:14px;padding:15px;font-family:'Syne',sans-serif;
  font-size:15px;font-weight:800;cursor:pointer;box-shadow:0 4px 18px rgba(74,124,47,.38);
  width:100%;max-width:340px;transition:all .2s}
.setup-save-btn:active{transform:scale(.97)}
.setup-err{color:#e07070;font-family:'Space Mono',monospace;font-size:10px;
  margin-top:6px;display:none;letter-spacing:.3px}
.setup-err.show{display:block}

/* TOAST */
.toast{position:fixed;top:calc(var(--safe-top) + 72px);left:50%;transform:translateX(-50%);
  z-index:600;background:rgba(35,58,20,.97);border:1px solid var(--border);
  border-radius:24px;padding:9px 18px;font-family:'Space Mono',monospace;font-size:11px;
  color:var(--sage);letter-spacing:.8px;pointer-events:none;opacity:0;transition:opacity .25s;
  white-space:nowrap;max-width:88vw;text-align:center}
.toast.show{opacity:1}

/* INSTALL */
.install-banner{display:none;position:fixed;bottom:calc(var(--safe-bot) + 74px);
  left:14px;right:14px;z-index:200;background:linear-gradient(135deg,#2d4a1e,var(--dark2));
  border:1px solid var(--border);border-radius:16px;padding:14px 16px;gap:12px;
  align-items:center;box-shadow:0 8px 28px rgba(0,0,0,.5);animation:slideUp .35s ease}
.install-banner.show{display:flex}
@keyframes slideUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.ib-t{flex:1}.ib-t strong{font-size:13px;display:block;margin-bottom:1px}
.ib-t span{font-size:10px;color:rgba(245,238,216,.45);font-family:'Space Mono',monospace}
.ib-bs{display:flex;flex-direction:column;gap:5px}
.ib-i{background:linear-gradient(135deg,var(--moss),#2d4a1e);color:var(--cream);border:none;
  border-radius:9px;padding:7px 14px;font-family:'Syne',sans-serif;font-size:12px;font-weight:700;cursor:pointer}
.ib-d{background:transparent;color:rgba(245,238,216,.35);border:none;font-size:10px;cursor:pointer;font-family:'Space Mono',monospace}

/* RETRY BTN */
.retry-btn{background:rgba(143,181,115,.1);border:1px solid var(--border);border-radius:10px;
  color:var(--sage);font-family:'Syne',sans-serif;font-size:13px;font-weight:700;
  padding:10px;width:100%;cursor:pointer;margin-top:8px;transition:all .2s}
.retry-btn:active{background:rgba(143,181,115,.2)}

@media(min-width:480px){.card{padding:22px}}
@media(min-width:600px){.scroll-area,.bottom-nav,.top-bar{max-width:480px;left:50%;right:auto;transform:translateX(-50%);width:100%}.bottom-nav,.top-bar{transform:translateX(-50%)}}
</style>
</head>
<body>

<!-- ‚ïê‚ïê SETUP ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="setup-screen" id="setup-screen">
  <div class="setup-logo">üåø</div>
  <div class="setup-title">Drativasta</div>
  <div class="setup-sub">Smart Farming Intelligence</div>
  <div class="free-badge">‚ú¶ 100% FREE ¬∑ No Credit Card</div>

  <div class="setup-steps">
    <div class="step">
      <div class="step-n">1</div>
      <div class="step-t">Open <a href="https://aistudio.google.com/apikey" target="_blank">aistudio.google.com/apikey</a> and sign in with Google</div>
    </div>
    <div class="step">
      <div class="step-n">2</div>
      <div class="step-t">Click <strong>"Create API Key"</strong> and copy the key shown</div>
    </div>
    <div class="step">
      <div class="step-n">3</div>
      <div class="step-t">Paste it below ‚Äî completely free, 1500 requests/day</div>
    </div>
  </div>

  <div class="setup-div"></div>
  <div class="setup-iw">
    <input type="password" id="api-key-input" placeholder="Paste Gemini API key (AIza...)" autocomplete="off" spellcheck="false">
    <button class="eye-btn" id="eye-btn" onclick="toggleKey()">üëÅ</button>
  </div>
  <div class="setup-hint">Your key is saved only on this device ¬∑ Never sent to anyone except Google</div>
  <button class="setup-save-btn" onclick="saveKey()">üöÄ Start Drativasta ‚Äî Free</button>
  <div class="setup-err" id="setup-err">‚ö†Ô∏è Key should start with AIza ‚Äî check and try again</div>
</div>

<!-- ‚ïê‚ïê TOP BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="top-bar">
  <div class="brand">
    <div class="brand-icon">üåø</div>
    <div>
      <div class="brand-name">Drativasta</div>
      <div class="brand-sub" id="powered-sub">Powered by Gemini ¬∑ Free</div>
    </div>
  </div>
  <div class="top-actions">
    <select class="lang-select" id="lang-sel" onchange="setLang(this.value)">
      <option value="en">üåê EN</option>
      <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
      <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
      <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
      <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
      <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
      <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
      <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
      <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
      <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option>
      <option value="ur">ÿßÿ±ÿØŸà</option>
      <option value="fr">Fran√ßais</option>
      <option value="es">Espa√±ol</option>
      <option value="de">Deutsch</option>
      <option value="zh">‰∏≠Êñá</option>
      <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
      <option value="sw">Swahili</option>
      <option value="pt">Portugu√™s</option>
    </select>
    <button class="top-btn" onclick="showSetup()">üîë Key</button>
  </div>
</div>

<!-- ‚ïê‚ïê SCROLL CONTENT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="scroll-area" id="scroll">

  <!-- WEATHER -->
  <div class="panel active" id="panel-weather">
    <div class="card">
      <div class="card-label" data-i18n="weather_label">üìç Location</div>
      <div class="input-row">
        <input type="text" id="w-loc" placeholder="City or region..." autocomplete="off" spellcheck="false" data-i18n-ph="weather_ph">
        <button class="btn btn-ghost" style="flex:0 0 auto;padding:12px 14px;font-size:13px" onclick="fetchWeather()" data-i18n="go_btn">Go</button>
      </div>
      <button class="btn btn-ghost" style="width:100%;margin-bottom:2px;font-size:12px" onclick="useGPS()" data-i18n="gps_btn">üì° Use My GPS Location</button>
      <div class="loader" id="w-loader"><div class="spinner"></div><div class="loader-txt" data-i18n="weather_loading">FETCHING WEATHER...</div></div>
      <div id="w-result"></div>
    </div>
  </div>

  <!-- SOIL -->
  <div class="panel" id="panel-soil">
    <div class="card">
      <div class="card-label" data-i18n="soil_label">ü™® Soil Analysis</div>
      <div class="mode-toggle">
        <button class="mode-btn active" id="mode-cam-btn" onclick="setSoilMode('camera')" data-i18n="cam_scan">üì∑ Camera Scan</button>
        <button class="mode-btn" id="mode-manual-btn" onclick="setSoilMode('manual')" data-i18n="manual_entry">‚úèÔ∏è Manual Entry</button>
      </div>

      <!-- Camera mode -->
      <div id="soil-cam-mode">
        <div class="badge" data-i18n="soil_cam_badge">‚ú¶ Point camera at soil for AI analysis</div>
        <div class="capture-row">
          <button class="btn btn-primary" style="flex:1" onclick="openSoilCam()" data-i18n="scan_soil">üì∑ Scan Soil</button>
          <button class="btn btn-ghost" onclick="document.getElementById('soil-file').click()" data-i18n="upload_btn">üìÅ Upload</button>
        </div>
        <input type="file" id="soil-file" accept="image/*" style="display:none" onchange="onSoilFile(event)">
        <img id="soil-preview" class="preview-img" alt="Soil">
        <div class="cap-source" id="soil-src"></div>
        <div class="fg" style="margin-bottom:12px">
          <label data-i18n="crop_label">INTENDED CROP (OPTIONAL)</label>
          <input type="text" id="s-crop-cam" data-i18n-ph="crop_ph" placeholder="e.g. Rice, Wheat, Tomatoes...">
        </div>
        <button class="btn btn-primary" id="soil-cam-btn" onclick="analyzeSoilImg()" disabled data-i18n="analyze_soil">üî¨ Analyze Soil</button>
      </div>

      <!-- Manual mode -->
      <div id="soil-manual-mode" style="display:none">
        <div class="badge" data-i18n="manual_badge">‚ú¶ Enter sensor or lab readings</div>
        <div class="soil-grid">
          <div class="fg"><label data-i18n="ph">PH LEVEL</label><input type="number" id="s-ph" placeholder="e.g. 6.5" min="0" max="14" step="0.1"></div>
          <div class="fg"><label data-i18n="moisture">MOISTURE %</label><input type="number" id="s-moist" placeholder="e.g. 45"></div>
          <div class="fg"><label data-i18n="nitrogen">NITROGEN N</label><input type="number" id="s-n" placeholder="mg/kg"></div>
          <div class="fg"><label data-i18n="phosphorus">PHOSPHORUS P</label><input type="number" id="s-p" placeholder="mg/kg"></div>
          <div class="fg"><label data-i18n="potassium">POTASSIUM K</label><input type="number" id="s-k" placeholder="mg/kg"></div>
          <div class="fg">
            <label data-i18n="soil_type">SOIL TYPE</label>
            <select id="s-type">
              <option value="">‚Äî Select ‚Äî</option>
              <option>Clay</option><option>Sandy</option><option>Loam</option>
              <option>Silt</option><option>Peat</option><option>Chalky</option>
            </select>
          </div>
        </div>
        <div class="fg" style="margin-bottom:14px">
          <label data-i18n="crop_label">INTENDED CROP (OPTIONAL)</label>
          <input type="text" id="s-crop" data-i18n-ph="crop_ph" placeholder="e.g. Rice, Wheat, Tomatoes...">
        </div>
        <button class="btn btn-primary" onclick="analyzeSoil()" data-i18n="analyze_soil">üî¨ Analyze Soil</button>
      </div>

      <div class="loader" id="s-loader"><div class="spinner"></div><div class="loader-txt" data-i18n="soil_loading">ANALYSING SOIL...</div></div>
      <div class="result-box" id="s-result"></div>
    </div>
  </div>

  <!-- PLANT -->
  <div class="panel" id="panel-plant">
    <div class="card">
      <div class="card-label" data-i18n="plant_label">üå± Plant Health</div>
      <div class="badge" data-i18n="plant_badge">‚ú¶ Capture or upload a plant photo</div>
      <div class="capture-row">
        <button class="btn btn-primary" style="flex:1" onclick="openPlantCam()" data-i18n="camera_btn">üì∑ Camera</button>
        <button class="btn btn-ghost" onclick="document.getElementById('plant-file').click()" data-i18n="upload_btn">üìÅ Upload</button>
      </div>
      <input type="file" id="plant-file" accept="image/*" style="display:none" onchange="onPlantFile(event)">
      <img id="plant-preview" class="preview-img" alt="Plant">
      <div class="cap-source" id="plant-src"></div>
      <div class="fg" style="margin-bottom:12px">
        <label data-i18n="context_label">EXTRA CONTEXT (OPTIONAL)</label>
        <textarea id="p-ctx" rows="2" data-i18n-ph="context_ph" placeholder="e.g. Outdoor tomato, yellowing started 3 days ago..."></textarea>
      </div>
      <button class="btn btn-primary" id="p-btn" onclick="analyzePlant()" disabled data-i18n="detect_btn">üî¨ Detect Issues</button>
      <div class="loader" id="p-loader"><div class="spinner"></div><div class="loader-txt" data-i18n="plant_loading">SCANNING PLANT...</div></div>
      <div class="result-box" id="p-result"></div>
    </div>
  </div>

</div>

<!-- ‚ïê‚ïê SOIL CAMERA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="cam-modal" id="soil-cam-modal">
  <div class="cam-hint" data-i18n="soil_cam_hint">POINT AT SOIL ¬∑ TAP CIRCLE TO CAPTURE</div>
  <video id="soil-vid" autoplay playsinline muted></video>
  <div class="cam-controls">
    <button class="cam-btn-c" onclick="closeSoilCam()">‚úï</button>
    <button class="shutter" onclick="snapSoil()"></button>
    <button class="cam-btn-c" onclick="flipSoilCam()">‚Ü©</button>
  </div>
  <canvas id="soil-canvas"></canvas>
</div>

<!-- ‚ïê‚ïê PLANT CAMERA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="cam-modal" id="plant-cam-modal">
  <div class="cam-hint" data-i18n="plant_cam_hint">POINT AT PLANT ¬∑ TAP CIRCLE TO CAPTURE</div>
  <video id="plant-vid" autoplay playsinline muted></video>
  <div class="cam-controls">
    <button class="cam-btn-c" onclick="closePlantCam()">‚úï</button>
    <button class="shutter" onclick="snapPlant()"></button>
    <button class="cam-btn-c" onclick="flipPlantCam()">‚Ü©</button>
  </div>
  <canvas id="plant-canvas"></canvas>
</div>

<!-- ‚ïê‚ïê BOTTOM NAV ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<nav class="bottom-nav">
  <button class="nav-btn active" id="nav-weather" onclick="switchTab('weather')">
    <span class="ni">üå§</span><span class="nl" data-i18n="nav_weather">Weather</span>
  </button>
  <button class="nav-btn" id="nav-soil" onclick="switchTab('soil')">
    <span class="ni">ü™®</span><span class="nl" data-i18n="nav_soil">Soil</span>
  </button>
  <button class="nav-btn" id="nav-plant" onclick="switchTab('plant')">
    <span class="ni">üå±</span><span class="nl" data-i18n="nav_plant">Plant</span>
  </button>
</nav>

<!-- ‚ïê‚ïê INSTALL BANNER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="install-banner" id="install-banner">
  <div class="ib-t"><strong>Install Drativasta</strong><span>Add to home screen ¬∑ works offline</span></div>
  <div class="ib-bs">
    <button class="ib-i" onclick="doInstall()">Install</button>
    <button class="ib-d" onclick="dismissInstall()">Not now</button>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
'use strict';

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TRANSLATIONS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const LANGS = {
  en:{weather_label:"üìç Location",weather_ph:"City or region...",go_btn:"Go",gps_btn:"üì° Use My GPS Location",weather_loading:"FETCHING WEATHER...",soil_label:"ü™® Soil Analysis",cam_scan:"üì∑ Camera Scan",manual_entry:"‚úèÔ∏è Manual Entry",soil_cam_badge:"‚ú¶ Point camera at soil for AI analysis",scan_soil:"üì∑ Scan Soil",upload_btn:"üìÅ Upload",crop_label:"INTENDED CROP (OPTIONAL)",crop_ph:"e.g. Rice, Wheat, Tomatoes...",analyze_soil:"üî¨ Analyze Soil",manual_badge:"‚ú¶ Enter sensor or lab readings",ph:"PH LEVEL",moisture:"MOISTURE %",nitrogen:"NITROGEN N",phosphorus:"PHOSPHORUS P",potassium:"POTASSIUM K",soil_type:"SOIL TYPE",soil_loading:"ANALYSING SOIL...",plant_label:"üå± Plant Health",plant_badge:"‚ú¶ Capture or upload a plant photo",camera_btn:"üì∑ Camera",context_label:"EXTRA CONTEXT (OPTIONAL)",context_ph:"e.g. Outdoor tomato, yellowing started 3 days ago...",detect_btn:"üî¨ Detect Issues",plant_loading:"SCANNING PLANT...",nav_weather:"Weather",nav_soil:"Soil",nav_plant:"Plant",soil_cam_hint:"POINT AT SOIL ¬∑ TAP CIRCLE TO CAPTURE",plant_cam_hint:"POINT AT PLANT ¬∑ TAP CIRCLE TO CAPTURE"},
  hi:{weather_label:"üìç ‡§∏‡•ç‡§•‡§æ‡§®",weather_ph:"‡§∂‡§π‡§∞ ‡§Ø‡§æ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞...",go_btn:"‡§ú‡§æ‡§è‡§Ç",gps_btn:"üì° GPS ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç",weather_loading:"‡§Æ‡•å‡§∏‡§Æ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...",soil_label:"ü™® ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£",cam_scan:"üì∑ ‡§ï‡•à‡§Æ‡§∞‡§æ ‡§∏‡•ç‡§ï‡•à‡§®",manual_entry:"‚úèÔ∏è ‡§Æ‡•à‡§®‡•ç‡§Ø‡•Å‡§Ö‡§≤",soil_cam_badge:"‚ú¶ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•à‡§Æ‡§∞‡§æ ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç",scan_soil:"üì∑ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§∏‡•ç‡§ï‡•à‡§®",upload_btn:"üìÅ ‡§Ö‡§™‡§≤‡•ã‡§°",crop_label:"‡§á‡§ö‡•ç‡§õ‡§ø‡§§ ‡§´‡§∏‡§≤ (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)",crop_ph:"‡§ú‡•à‡§∏‡•á ‡§ö‡§æ‡§µ‡§≤, ‡§ó‡•á‡§π‡•Ç‡§Ç...",analyze_soil:"üî¨ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö",manual_badge:"‚ú¶ ‡§∏‡•á‡§Ç‡§∏‡§∞ ‡§∞‡•Ä‡§°‡§ø‡§Ç‡§ó ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç",ph:"‡§™‡•Ä‡§è‡§ö ‡§∏‡•ç‡§§‡§∞",moisture:"‡§®‡§Æ‡•Ä %",nitrogen:"‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§®",phosphorus:"‡§´‡§æ‡§∏‡•ç‡§´‡•ã‡§∞‡§∏",potassium:"‡§™‡•ã‡§ü‡•á‡§∂‡§ø‡§Ø‡§Æ",soil_type:"‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞",soil_loading:"‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£...",plant_label:"üå± ‡§™‡•å‡§ß‡•á ‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø",plant_badge:"‚ú¶ ‡§™‡•å‡§ß‡•á ‡§ï‡•Ä ‡§´‡•ã‡§ü‡•ã ‡§≤‡•á‡§Ç ‡§Ø‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",camera_btn:"üì∑ ‡§ï‡•à‡§Æ‡§∞‡§æ",context_label:"‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)",context_ph:"‡§ú‡•à‡§∏‡•á ‡§ü‡§Æ‡§æ‡§ü‡§∞ ‡§ï‡§æ ‡§™‡•å‡§ß‡§æ, ‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡§æ‡§Ç ‡§™‡•Ä‡§≤‡•Ä ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...",detect_btn:"üî¨ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§™‡§π‡§ö‡§æ‡§®‡•á‡§Ç",plant_loading:"‡§™‡•å‡§ß‡•á ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö...",nav_weather:"‡§Æ‡•å‡§∏‡§Æ",nav_soil:"‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä",nav_plant:"‡§™‡•å‡§ß‡§æ",soil_cam_hint:"‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§™‡§∞ ‡§ï‡•à‡§Æ‡§∞‡§æ ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç",plant_cam_hint:"‡§™‡•å‡§ß‡•á ‡§™‡§∞ ‡§ï‡•à‡§Æ‡§∞‡§æ ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç"},
  ta:{weather_label:"üìç ‡Æá‡Æü‡ÆÆ‡Øç",weather_ph:"‡Æ®‡Æï‡Æ∞‡ÆÆ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ™‡Æï‡ØÅ‡Æ§‡Æø...",go_btn:"‡Æö‡ØÜ‡Æ≤‡Øç",gps_btn:"üì° GPS ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ",weather_loading:"‡Æµ‡Ææ‡Æ©‡Æø‡Æ≤‡Øà ‡Æè‡Æ±‡Øç‡Æ±‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...",soil_label:"ü™® ‡ÆÆ‡Æ£‡Øç ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ",cam_scan:"üì∑ ‡Æï‡Øá‡ÆÆ‡Æ∞‡Ææ ‡Æ∏‡Øç‡Æï‡Øá‡Æ©‡Øç",manual_entry:"‚úèÔ∏è ‡Æï‡Øà‡ÆØ‡Øá‡Æü‡ØÅ",soil_cam_badge:"‚ú¶ ‡ÆÆ‡Æ£‡Øç‡Æ£‡Æø‡Æ≤‡Øç ‡Æï‡Øá‡ÆÆ‡Æ∞‡Ææ‡Æµ‡Øà ‡Æö‡ØÅ‡Æü‡Øç‡Æü‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",scan_soil:"üì∑ ‡ÆÆ‡Æ£‡Øç ‡Æ∏‡Øç‡Æï‡Øá‡Æ©‡Øç",upload_btn:"üìÅ ‡Æ™‡Æ§‡Æø‡Æµ‡Øá‡Æ±‡Øç‡Æ±‡ØÅ",crop_label:"‡Æµ‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡Æø‡ÆØ ‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç (‡Æµ‡Æø‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ÆÆ‡Øç)",crop_ph:"‡Æé.‡Æï‡Ææ. ‡Æ®‡ØÜ‡Æ≤‡Øç, ‡Æï‡Øã‡Æ§‡ØÅ‡ÆÆ‡Øà...",analyze_soil:"üî¨ ‡ÆÆ‡Æ£‡Øç ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ",manual_badge:"‚ú¶ ‡Æö‡ØÜ‡Æ©‡Øç‡Æö‡Ææ‡Æ∞‡Øç ‡ÆÖ‡Æ≥‡Æµ‡ØÄ‡Æü‡ØÅ‡Æï‡Æ≥‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç",ph:"pH ‡ÆÖ‡Æ≥‡Æµ‡ØÅ",moisture:"‡Æà‡Æ∞‡Æ™‡Øç‡Æ™‡Æ§‡ÆÆ‡Øç %",nitrogen:"‡Æ®‡Øà‡Æü‡Øç‡Æ∞‡Æú‡Æ©‡Øç",phosphorus:"‡Æ™‡Ææ‡Æ∏‡Øç‡Æ™‡Æ∞‡Æ∏‡Øç",potassium:"‡Æ™‡Øä‡Æü‡Øç‡Æü‡Ææ‡Æö‡Æø‡ÆØ‡ÆÆ‡Øç",soil_type:"‡ÆÆ‡Æ£‡Øç ‡Æµ‡Æï‡Øà",soil_loading:"‡ÆÆ‡Æ£‡Øç ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ...",plant_label:"üå± ‡Æ§‡Ææ‡Æµ‡Æ∞ ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ‡ÆÆ‡Øç",plant_badge:"‚ú¶ ‡Æ§‡Ææ‡Æµ‡Æ∞‡Æ§‡Øç‡Æ§‡Æø‡Æ©‡Øç ‡Æ™‡ØÅ‡Æï‡Øà‡Æ™‡Øç‡Æ™‡Æü‡ÆÆ‡Øç ‡Æé‡Æü‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",camera_btn:"üì∑ ‡Æï‡Øá‡ÆÆ‡Æ∞‡Ææ",context_label:"‡Æï‡ØÇ‡Æü‡ØÅ‡Æ§‡Æ≤‡Øç ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç (‡Æµ‡Æø‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ÆÆ‡Øç)",context_ph:"‡Æé.‡Æï‡Ææ. ‡Æ§‡Æï‡Øç‡Æï‡Ææ‡Æ≥‡Æø, ‡Æá‡Æ≤‡Øà‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æû‡Øç‡Æö‡Æ≥‡Ææ‡Æï‡Æø‡Æ©...",detect_btn:"üî¨ ‡Æ™‡Æø‡Æ∞‡Æö‡Øç‡Æö‡Æø‡Æ©‡Øà ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø",plant_loading:"‡Æ§‡Ææ‡Æµ‡Æ∞‡ÆÆ‡Øç ‡Æ∏‡Øç‡Æï‡Øá‡Æ©‡Øç...",nav_weather:"‡Æµ‡Ææ‡Æ©‡Æø‡Æ≤‡Øà",nav_soil:"‡ÆÆ‡Æ£‡Øç",nav_plant:"‡Æ§‡Ææ‡Æµ‡Æ∞‡ÆÆ‡Øç",soil_cam_hint:"‡ÆÆ‡Æ£‡Øç‡Æ£‡Æø‡Æ≤‡Øç ‡Æï‡Øá‡ÆÆ‡Æ∞‡Ææ ‡Æö‡ØÅ‡Æü‡Øç‡Æü‡ØÅ",plant_cam_hint:"‡Æ§‡Ææ‡Æµ‡Æ∞‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡Æï‡Øá‡ÆÆ‡Æ∞‡Ææ ‡Æö‡ØÅ‡Æü‡Øç‡Æü‡ØÅ"},
  te:{weather_label:"üìç ‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç",weather_ph:"‡∞®‡∞ó‡∞∞‡∞Ç ‡∞≤‡±á‡∞¶‡∞æ ‡∞™‡±ç‡∞∞‡∞æ‡∞Ç‡∞§‡∞Ç...",go_btn:"‡∞µ‡±Ü‡∞≥‡±ç‡∞≥‡±Å",gps_btn:"üì° GPS ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞Ç‡∞ö‡±Å",weather_loading:"‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç ‡∞≤‡±ã‡∞°‡±ç...",soil_label:"ü™® ‡∞®‡±á‡∞≤ ‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞£",cam_scan:"üì∑ ‡∞ï‡±Ü‡∞Æ‡±Ü‡∞∞‡∞æ ‡∞∏‡±ç‡∞ï‡∞æ‡∞®‡±ç",manual_entry:"‚úèÔ∏è ‡∞Æ‡∞æ‡∞®‡±ç‡∞Ø‡±Å‡∞µ‡∞≤‡±ç",soil_cam_badge:"‚ú¶ ‡∞®‡±á‡∞≤‡∞™‡±à ‡∞ï‡±Ü‡∞Æ‡±Ü‡∞∞‡∞æ ‡∞™‡∞ü‡±ç‡∞ü‡∞Ç‡∞°‡∞ø",scan_soil:"üì∑ ‡∞®‡±á‡∞≤ ‡∞∏‡±ç‡∞ï‡∞æ‡∞®‡±ç",upload_btn:"üìÅ ‡∞Ö‡∞™‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç",crop_label:"‡∞â‡∞¶‡±ç‡∞¶‡±á‡∞∂‡∞ø‡∞Ç‡∞ö‡∞ø‡∞® ‡∞™‡∞Ç‡∞ü (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)",crop_ph:"‡∞â‡∞¶‡∞æ. ‡∞µ‡∞∞‡∞ø, ‡∞ó‡±ã‡∞ß‡±Å‡∞Æ...",analyze_soil:"üî¨ ‡∞®‡±á‡∞≤ ‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞£",manual_badge:"‚ú¶ ‡∞∏‡±Ü‡∞®‡±ç‡∞∏‡∞æ‡∞∞‡±ç ‡∞∞‡±Ä‡∞°‡∞ø‡∞Ç‡∞ó‡±Å‡∞≤‡±Å ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",ph:"pH ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø",moisture:"‡∞§‡±á‡∞Æ %",nitrogen:"‡∞®‡∞§‡±ç‡∞∞‡∞ú‡∞®‡∞ø",phosphorus:"‡∞≠‡∞æ‡∞∏‡±ç‡∞µ‡∞∞‡∞Ç",potassium:"‡∞™‡±ä‡∞ü‡∞æ‡∞∑‡∞ø‡∞Ø‡∞Ç",soil_type:"‡∞®‡±á‡∞≤ ‡∞∞‡∞ï‡∞Ç",soil_loading:"‡∞®‡±á‡∞≤ ‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞ø‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...",plant_label:"üå± ‡∞Æ‡±ä‡∞ï‡±ç‡∞ï ‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø‡∞Ç",plant_badge:"‚ú¶ ‡∞Æ‡±ä‡∞ï‡±ç‡∞ï ‡∞´‡±ã‡∞ü‡±ã ‡∞§‡±Ä‡∞Ø‡∞Ç‡∞°‡∞ø",camera_btn:"üì∑ ‡∞ï‡±Ü‡∞Æ‡±Ü‡∞∞‡∞æ",context_label:"‡∞Ö‡∞¶‡∞®‡∞™‡±Å ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)",context_ph:"‡∞â‡∞¶‡∞æ. ‡∞ü‡±ä‡∞Æ‡∞æ‡∞ü‡±ã ‡∞Æ‡±ä‡∞ï‡±ç‡∞ï, ‡∞Ü‡∞ï‡±Å‡∞≤‡±Å ‡∞™‡∞∏‡±Å‡∞™‡±Å...",detect_btn:"üî¨ ‡∞∏‡∞Æ‡∞∏‡±ç‡∞Ø ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞Ç‡∞ö‡±Å",plant_loading:"‡∞Æ‡±ä‡∞ï‡±ç‡∞ï ‡∞∏‡±ç‡∞ï‡∞æ‡∞®‡±ç...",nav_weather:"‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç",nav_soil:"‡∞®‡±á‡∞≤",nav_plant:"‡∞Æ‡±ä‡∞ï‡±ç‡∞ï",soil_cam_hint:"‡∞®‡±á‡∞≤‡∞™‡±à ‡∞ï‡±Ü‡∞Æ‡±Ü‡∞∞‡∞æ ‡∞™‡∞ü‡±ç‡∞ü‡∞Ç‡∞°‡∞ø",plant_cam_hint:"‡∞Æ‡±ä‡∞ï‡±ç‡∞ï‡∞™‡±à ‡∞ï‡±Ü‡∞Æ‡±Ü‡∞∞‡∞æ ‡∞™‡∞ü‡±ç‡∞ü‡∞Ç‡∞°‡∞ø"},
  kn:{weather_label:"üìç ‡≤∏‡≥ç‡≤•‡≤≥",weather_ph:"‡≤®‡≤ó‡≤∞ ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤™‡≥ç‡≤∞‡≤¶‡≥á‡≤∂...",go_btn:"‡≤π‡≥ã‡≤ó‡≤ø",gps_btn:"üì° GPS ‡≤¨‡≤≥‡≤∏‡≤ø",weather_loading:"‡≤π‡≤µ‡≤æ‡≤Æ‡≤æ‡≤® ‡≤≤‡≥ã‡≤°‡≥ç...",soil_label:"ü™® ‡≤Æ‡≤£‡≥ç‡≤£‡≥Å ‡≤µ‡≤ø‡≤∂‡≥ç‡≤≤‡≥á‡≤∑‡≤£‡≥Ü",cam_scan:"üì∑ ‡≤ï‡≥ç‡≤Ø‡≤æ‡≤Æ‡≥Ü‡≤∞‡≤æ ‡≤∏‡≥ç‡≤ï‡≥ç‡≤Ø‡≤æ‡≤®‡≥ç",manual_entry:"‚úèÔ∏è ‡≤π‡≤∏‡≥ç‡≤§‡≤ö‡≤æ‡≤≤‡≤ø‡≤§",soil_cam_badge:"‚ú¶ ‡≤Æ‡≤£‡≥ç‡≤£‡≤ø‡≤® ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤ï‡≥ç‡≤Ø‡≤æ‡≤Æ‡≥Ü‡≤∞‡≤æ ‡≤π‡≤ø‡≤°‡≤ø‡≤Ø‡≤ø‡≤∞‡≤ø",scan_soil:"üì∑ ‡≤Æ‡≤£‡≥ç‡≤£‡≥Å ‡≤∏‡≥ç‡≤ï‡≥ç‡≤Ø‡≤æ‡≤®‡≥ç",upload_btn:"üìÅ ‡≤Ö‡≤™‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç",crop_label:"‡≤â‡≤¶‡≥ç‡≤¶‡≥á‡≤∂‡≤ø‡≤§ ‡≤¨‡≥Ü‡≤≥‡≥Ü (‡≤ê‡≤ö‡≥ç‡≤õ‡≤ø‡≤ï)",crop_ph:"‡≤â‡≤¶‡≤æ. ‡≤≠‡≤§‡≥ç‡≤§, ‡≤ó‡≥ã‡≤ß‡≤ø...",analyze_soil:"üî¨ ‡≤Æ‡≤£‡≥ç‡≤£‡≥Å ‡≤µ‡≤ø‡≤∂‡≥ç‡≤≤‡≥á‡≤∑‡≤£‡≥Ü",manual_badge:"‚ú¶ ‡≤∏‡≥Ü‡≤®‡≥ç‡≤∏‡≤∞‡≥ç ‡≤∞‡≥Ä‡≤°‡≤ø‡≤Ç‡≤ó‡≥ç ‡≤®‡≤Æ‡≥Ç‡≤¶‡≤ø‡≤∏‡≤ø",ph:"pH ‡≤Æ‡≤ü‡≥ç‡≤ü",moisture:"‡≤§‡≥á‡≤µ‡≤æ‡≤Ç‡≤∂ %",nitrogen:"‡≤∏‡≤æ‡≤∞‡≤ú‡≤®‡≤ï",phosphorus:"‡≤∞‡≤Ç‡≤ú‡≤ï",potassium:"‡≤™‡≥ä‡≤ü‡≥ç‡≤Ø‡≤æ‡≤∏‡≤ø‡≤Ø‡≤Æ‡≥ç",soil_type:"‡≤Æ‡≤£‡≥ç‡≤£‡≤ø‡≤® ‡≤µ‡≤ø‡≤ß",soil_loading:"‡≤Æ‡≤£‡≥ç‡≤£‡≥Å ‡≤µ‡≤ø‡≤∂‡≥ç‡≤≤‡≥á‡≤∑‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü...",plant_label:"üå± ‡≤∏‡≤∏‡≥ç‡≤Ø ‡≤Ü‡≤∞‡≥ã‡≤ó‡≥ç‡≤Ø",plant_badge:"‚ú¶ ‡≤∏‡≤∏‡≥ç‡≤Ø‡≤¶ ‡≤´‡≥ã‡≤ü‡≥ã ‡≤§‡≥Ü‡≤ó‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø",camera_btn:"üì∑ ‡≤ï‡≥ç‡≤Ø‡≤æ‡≤Æ‡≥Ü‡≤∞‡≤æ",context_label:"‡≤π‡≥Ü‡≤ö‡≥ç‡≤ö‡≤ø‡≤® ‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø (‡≤ê‡≤ö‡≥ç‡≤õ‡≤ø‡≤ï)",context_ph:"‡≤â‡≤¶‡≤æ. ‡≤ü‡≥ä‡≤Æ‡≥ç‡≤Ø‡≤æ‡≤ü‡≥ä ‡≤ó‡≤ø‡≤°, ‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤π‡≤≥‡≤¶‡≤ø...",detect_btn:"üî¨ ‡≤∏‡≤Æ‡≤∏‡≥ç‡≤Ø‡≥Ü ‡≤™‡≤§‡≥ç‡≤§‡≥Ü",plant_loading:"‡≤∏‡≤∏‡≥ç‡≤Ø ‡≤∏‡≥ç‡≤ï‡≥ç‡≤Ø‡≤æ‡≤®‡≥ç...",nav_weather:"‡≤π‡≤µ‡≤æ‡≤Æ‡≤æ‡≤®",nav_soil:"‡≤Æ‡≤£‡≥ç‡≤£‡≥Å",nav_plant:"‡≤∏‡≤∏‡≥ç‡≤Ø",soil_cam_hint:"‡≤Æ‡≤£‡≥ç‡≤£‡≤ø‡≤® ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤ï‡≥ç‡≤Ø‡≤æ‡≤Æ‡≥Ü‡≤∞‡≤æ ‡≤π‡≤ø‡≤°‡≤ø‡≤Ø‡≤ø‡≤∞‡≤ø",plant_cam_hint:"‡≤∏‡≤∏‡≥ç‡≤Ø‡≤¶ ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤ï‡≥ç‡≤Ø‡≤æ‡≤Æ‡≥Ü‡≤∞‡≤æ ‡≤π‡≤ø‡≤°‡≤ø‡≤Ø‡≤ø‡≤∞‡≤ø"},
  ml:{weather_label:"üìç ‡¥∏‡µç‡¥•‡¥≤‡¥Ç",go_btn:"‡¥™‡µã‡¥ï‡µÇ",gps_btn:"üì° GPS ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ï‡µç‡¥ï‡µÇ",soil_label:"ü™® ‡¥Æ‡¥£‡µç‡¥£‡µç ‡¥µ‡¥ø‡¥∂‡¥ï‡¥≤‡¥®‡¥Ç",cam_scan:"üì∑ ‡¥ï‡µç‡¥Ø‡¥æ‡¥Æ‡¥± ‡¥∏‡µç‡¥ï‡¥æ‡µª",manual_entry:"‚úèÔ∏è ‡¥Æ‡¥æ‡¥®‡µÅ‡¥µ‡µΩ",scan_soil:"üì∑ ‡¥Æ‡¥£‡µç‡¥£‡µç ‡¥∏‡µç‡¥ï‡¥æ‡µª",upload_btn:"üìÅ ‡¥Ö‡¥™‡µç‚Äå‡¥≤‡µã‡¥°‡µç",analyze_soil:"üî¨ ‡¥Æ‡¥£‡µç‡¥£‡µç ‡¥µ‡¥ø‡¥∂‡¥ï‡¥≤‡¥®‡¥Ç",plant_label:"üå± ‡¥∏‡¥∏‡µç‡¥Ø ‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø‡¥Ç",camera_btn:"üì∑ ‡¥ï‡µç‡¥Ø‡¥æ‡¥Æ‡¥±",detect_btn:"üî¨ ‡¥™‡µç‡¥∞‡¥∂‡µç‡¥®‡¥Ç ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡µÇ",nav_weather:"‡¥ï‡¥æ‡¥≤‡¥æ‡¥µ‡¥∏‡µç‡¥•",nav_soil:"‡¥Æ‡¥£‡µç‡¥£‡µç",nav_plant:"‡¥∏‡¥∏‡µç‡¥Ø‡¥Ç"},
  mr:{weather_label:"üìç ‡§∏‡•ç‡§•‡§æ‡§®",go_btn:"‡§ú‡§æ",gps_btn:"üì° GPS ‡§µ‡§æ‡§™‡§∞‡§æ",soil_label:"ü™® ‡§Æ‡§æ‡§§‡•Ä‡§ö‡•á ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£",cam_scan:"üì∑ ‡§ï‡•Ö‡§Æ‡•á‡§∞‡§æ ‡§∏‡•ç‡§ï‡•Ö‡§®",manual_entry:"‚úèÔ∏è ‡§Æ‡•Ö‡§®‡•ç‡§Ø‡•Å‡§Ö‡§≤",scan_soil:"üì∑ ‡§Æ‡§æ‡§§‡•Ä ‡§∏‡•ç‡§ï‡•Ö‡§®",upload_btn:"üìÅ ‡§Ö‡§™‡§≤‡•ã‡§°",analyze_soil:"üî¨ ‡§Æ‡§æ‡§§‡•Ä‡§ö‡•á ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£",plant_label:"üå± ‡§µ‡§®‡§∏‡•ç‡§™‡§§‡•Ä ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø",camera_btn:"üì∑ ‡§ï‡•Ö‡§Æ‡•á‡§∞‡§æ",detect_btn:"üî¨ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ì‡§≥‡§ñ‡§æ",nav_weather:"‡§π‡§µ‡§æ‡§Æ‡§æ‡§®",nav_soil:"‡§Æ‡§æ‡§§‡•Ä",nav_plant:"‡§µ‡§®‡§∏‡•ç‡§™‡§§‡•Ä"},
  bn:{weather_label:"üìç ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶®",go_btn:"‡¶Ø‡¶æ‡¶®",gps_btn:"üì° GPS ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®",soil_label:"ü™® ‡¶Æ‡¶æ‡¶ü‡¶ø ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£",cam_scan:"üì∑ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶∏‡ßç‡¶ï‡ßç‡¶Ø‡¶æ‡¶®",manual_entry:"‚úèÔ∏è ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤",scan_soil:"üì∑ ‡¶Æ‡¶æ‡¶ü‡¶ø ‡¶∏‡ßç‡¶ï‡ßç‡¶Ø‡¶æ‡¶®",upload_btn:"üìÅ ‡¶Ü‡¶™‡¶≤‡ßã‡¶°",analyze_soil:"üî¨ ‡¶Æ‡¶æ‡¶ü‡¶ø ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£",plant_label:"üå± ‡¶â‡¶¶‡ßç‡¶≠‡¶ø‡¶¶ ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø",camera_btn:"üì∑ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ",detect_btn:"üî¨ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶∏‡¶®‡¶æ‡¶ï‡ßç‡¶§",nav_weather:"‡¶Ü‡¶¨‡¶π‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ",nav_soil:"‡¶Æ‡¶æ‡¶ü‡¶ø",nav_plant:"‡¶â‡¶¶‡ßç‡¶≠‡¶ø‡¶¶"},
  gu:{weather_label:"üìç ‡™∏‡´ç‡™•‡™æ‡™®",go_btn:"‡™ú‡™æ‡™ì",gps_btn:"üì° GPS ‡™µ‡™æ‡™™‡™∞‡´ã",soil_label:"ü™® ‡™Æ‡™æ‡™ü‡´Ä ‡™µ‡™ø‡™∂‡´ç‡™≤‡´á‡™∑‡™£",cam_scan:"üì∑ ‡™ï‡´á‡™Æ‡´á‡™∞‡™æ ‡™∏‡´ç‡™ï‡´á‡™®",manual_entry:"‚úèÔ∏è ‡™Æ‡´á‡™®‡´ç‡™Ø‡´Å‡™Ö‡™≤",scan_soil:"üì∑ ‡™Æ‡™æ‡™ü‡´Ä ‡™∏‡´ç‡™ï‡´á‡™®",upload_btn:"üìÅ ‡™Ö‡™™‡™≤‡´ã‡™°",analyze_soil:"üî¨ ‡™Æ‡™æ‡™ü‡´Ä ‡™µ‡™ø‡™∂‡´ç‡™≤‡´á‡™∑‡™£",plant_label:"üå± ‡™õ‡´ã‡™° ‡™Ü‡™∞‡´ã‡™ó‡´ç‡™Ø",camera_btn:"üì∑ ‡™ï‡´á‡™Æ‡´á‡™∞‡™æ",detect_btn:"üî¨ ‡™∏‡™Æ‡™∏‡´ç‡™Ø‡™æ ‡™∂‡´ã‡™ß‡´ã",nav_weather:"‡™π‡™µ‡™æ‡™Æ‡™æ‡™®",nav_soil:"‡™Æ‡™æ‡™ü‡´Ä",nav_plant:"‡™õ‡´ã‡™°"},
  pa:{weather_label:"üìç ‡®∏‡®•‡®æ‡®®",go_btn:"‡®ú‡®æ‡®ì",gps_btn:"üì° GPS ‡®µ‡®∞‡®§‡©ã",soil_label:"ü™® ‡®Æ‡®ø‡©±‡®ü‡©Ä ‡®µ‡®ø‡®∏‡®º‡®≤‡©á‡®∏‡®º‡®£",cam_scan:"üì∑ ‡®ï‡©à‡®Æ‡®∞‡®æ ‡®∏‡®ï‡©à‡®®",manual_entry:"‚úèÔ∏è ‡®Æ‡©à‡®®‡©Ç‡®Ö‡®≤",scan_soil:"üì∑ ‡®Æ‡®ø‡©±‡®ü‡©Ä ‡®∏‡®ï‡©à‡®®",upload_btn:"üìÅ ‡®Ö‡®™‡®≤‡©ã‡®°",analyze_soil:"üî¨ ‡®Æ‡®ø‡©±‡®ü‡©Ä ‡®µ‡®ø‡®∏‡®º‡®≤‡©á‡®∏‡®º‡®£",plant_label:"üå± ‡®™‡©å‡®¶‡©á ‡®¶‡©Ä ‡®∏‡®ø‡®π‡®§",camera_btn:"üì∑ ‡®ï‡©à‡®Æ‡®∞‡®æ",detect_btn:"üî¨ ‡®∏‡®Æ‡©±‡®∏‡®ø‡®Ü ‡®≤‡©±‡®≠‡©ã",nav_weather:"‡®Æ‡©å‡®∏‡®Æ",nav_soil:"‡®Æ‡®ø‡©±‡®ü‡©Ä",nav_plant:"‡®™‡©å‡®¶‡®æ"},
  ur:{weather_label:"üìç ŸÖŸÇÿßŸÖ",go_btn:"ÿ¨ÿßÿ¶€å⁄∫",gps_btn:"üì° GPS ÿßÿ≥ÿ™ÿπŸÖÿßŸÑ ⁄©ÿ±€å⁄∫",soil_label:"ü™® ŸÖŸπ€å ⁄©ÿß ÿ™ÿ¨ÿ≤€å€Å",cam_scan:"üì∑ ⁄©€åŸÖÿ±€Å ÿßÿ≥⁄©€åŸÜ",manual_entry:"‚úèÔ∏è ÿØÿ≥ÿ™€å",scan_soil:"üì∑ ŸÖŸπ€å ÿßÿ≥⁄©€åŸÜ",upload_btn:"üìÅ ÿßŸæ ŸÑŸà⁄à",analyze_soil:"üî¨ ŸÖŸπ€å ⁄©ÿß ÿ™ÿ¨ÿ≤€å€Å",plant_label:"üå± ŸæŸàÿØ€í ⁄©€å ÿµÿ≠ÿ™",camera_btn:"üì∑ ⁄©€åŸÖÿ±€Å",detect_btn:"üî¨ ŸÖÿ≥ÿ¶ŸÑ€Å ÿ™ŸÑÿßÿ¥ ⁄©ÿ±€å⁄∫",nav_weather:"ŸÖŸàÿ≥ŸÖ",nav_soil:"ŸÖŸπ€å",nav_plant:"ŸæŸàÿØÿß"},
  fr:{weather_label:"üìç Localisation",go_btn:"Go",gps_btn:"üì° Utiliser GPS",soil_label:"ü™® Analyse du Sol",cam_scan:"üì∑ Scanner",manual_entry:"‚úèÔ∏è Manuel",scan_soil:"üì∑ Scanner Sol",upload_btn:"üìÅ Importer",analyze_soil:"üî¨ Analyser Sol",plant_label:"üå± Sant√© des Plantes",camera_btn:"üì∑ Cam√©ra",detect_btn:"üî¨ D√©tecter",nav_weather:"M√©t√©o",nav_soil:"Sol",nav_plant:"Plante"},
  es:{weather_label:"üìç Ubicaci√≥n",go_btn:"Ir",gps_btn:"üì° Usar GPS",soil_label:"ü™® An√°lisis del Suelo",cam_scan:"üì∑ Escanear",manual_entry:"‚úèÔ∏è Manual",scan_soil:"üì∑ Escanear Suelo",upload_btn:"üìÅ Subir",analyze_soil:"üî¨ Analizar Suelo",plant_label:"üå± Salud de Planta",camera_btn:"üì∑ C√°mara",detect_btn:"üî¨ Detectar",nav_weather:"Clima",nav_soil:"Suelo",nav_plant:"Planta"},
  de:{weather_label:"üìç Standort",go_btn:"Los",gps_btn:"üì° GPS nutzen",soil_label:"ü™® Bodenanalyse",cam_scan:"üì∑ Kamera-Scan",manual_entry:"‚úèÔ∏è Manuell",scan_soil:"üì∑ Boden scannen",upload_btn:"üìÅ Hochladen",analyze_soil:"üî¨ Boden analysieren",plant_label:"üå± Pflanzengesundheit",camera_btn:"üì∑ Kamera",detect_btn:"üî¨ Erkennen",nav_weather:"Wetter",nav_soil:"Boden",nav_plant:"Pflanze"},
  zh:{weather_label:"üìç ‰ΩçÁΩÆ",go_btn:"Êü•ËØ¢",gps_btn:"üì° ‰ΩøÁî®GPS",soil_label:"ü™® ÂúüÂ£§ÂàÜÊûê",cam_scan:"üì∑ Êâ´Êèè",manual_entry:"‚úèÔ∏è ÊâãÂä®",scan_soil:"üì∑ Êâ´ÊèèÂúüÂ£§",upload_btn:"üìÅ ‰∏ä‰º†",analyze_soil:"üî¨ ÂàÜÊûêÂúüÂ£§",plant_label:"üå± Ê§çÁâ©ÂÅ•Â∫∑",camera_btn:"üì∑ Áõ∏Êú∫",detect_btn:"üî¨ Ê£ÄÊµãÈóÆÈ¢ò",nav_weather:"Â§©Ê∞î",nav_soil:"ÂúüÂ£§",nav_plant:"Ê§çÁâ©"},
  ar:{weather_label:"üìç ÿßŸÑŸÖŸàŸÇÿπ",go_btn:"ÿ®ÿ≠ÿ´",gps_btn:"üì° ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ GPS",soil_label:"ü™® ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ™ÿ±ÿ®ÿ©",cam_scan:"üì∑ ŸÖÿ≥ÿ≠",manual_entry:"‚úèÔ∏è ŸäÿØŸàŸä",scan_soil:"üì∑ ŸÖÿ≥ÿ≠ ÿßŸÑÿ™ÿ±ÿ®ÿ©",upload_btn:"üìÅ ÿ±ŸÅÿπ",analyze_soil:"üî¨ ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ™ÿ±ÿ®ÿ©",plant_label:"üå± ÿµÿ≠ÿ© ÿßŸÑŸÜÿ®ÿßÿ™",camera_btn:"üì∑ ŸÉÿßŸÖŸäÿ±ÿß",detect_btn:"üî¨ ÿßŸÉÿ™ÿ¥ÿßŸÅ",nav_weather:"ÿßŸÑÿ∑ŸÇÿ≥",nav_soil:"ÿßŸÑÿ™ÿ±ÿ®ÿ©",nav_plant:"ÿßŸÑŸÜÿ®ÿßÿ™"},
  sw:{weather_label:"üìç Mahali",go_btn:"Nenda",gps_btn:"üì° Tumia GPS",soil_label:"ü™® Uchambuzi wa Udongo",cam_scan:"üì∑ Skani",manual_entry:"‚úèÔ∏è Mwongozo",scan_soil:"üì∑ Skani Udongo",upload_btn:"üìÅ Pakia",analyze_soil:"üî¨ Chunguza Udongo",plant_label:"üå± Afya ya Mimea",camera_btn:"üì∑ Kamera",detect_btn:"üî¨ Gundua Tatizo",nav_weather:"Hali ya Hewa",nav_soil:"Udongo",nav_plant:"Mmea"},
  pt:{weather_label:"üìç Localiza√ß√£o",go_btn:"Ir",gps_btn:"üì° Usar GPS",soil_label:"ü™® An√°lise do Solo",cam_scan:"üì∑ Digitalizar",manual_entry:"‚úèÔ∏è Manual",scan_soil:"üì∑ Digitalizar Solo",upload_btn:"üìÅ Enviar",analyze_soil:"üî¨ Analisar Solo",plant_label:"üå± Sa√∫de da Planta",camera_btn:"üì∑ C√¢mera",detect_btn:"üî¨ Detectar",nav_weather:"Clima",nav_soil:"Solo",nav_plant:"Planta"}
};

let currentLang = localStorage.getItem('dv_lang') || 'en';

function t(key) {
  return (LANGS[currentLang] && LANGS[currentLang][key]) || (LANGS['en'][key]) || key;
}

function setLang(lang) {
  currentLang = lang;
  localStorage.setItem('dv_lang', lang);
  applyTranslations();
  showToast('üåê ' + document.getElementById('lang-sel').options[document.getElementById('lang-sel').selectedIndex].text);
}

function applyTranslations() {
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    el.textContent = t(key);
  });
  document.querySelectorAll('[data-i18n-ph]').forEach(el => {
    const key = el.getAttribute('data-i18n-ph');
    el.placeholder = t(key);
  });
  // Set lang selector
  const sel = document.getElementById('lang-sel');
  if (sel) sel.value = currentLang;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê API KEY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const KEY_STORE = 'dv_gemini_key';
function getKey() { return localStorage.getItem(KEY_STORE) || ''; }

function saveKey() {
  const key = document.getElementById('api-key-input').value.trim();
  const err = document.getElementById('setup-err');
  if (!key || key.length < 10) { err.classList.add('show'); return; }
  err.classList.remove('show');
  localStorage.setItem(KEY_STORE, key);
  document.getElementById('setup-screen').classList.remove('show');
  showToast('‚úÖ Ready!');
}

function showSetup() {
  document.getElementById('api-key-input').value = getKey();
  document.getElementById('setup-screen').classList.add('show');
}

function toggleKey() {
  const inp = document.getElementById('api-key-input');
  const btn = document.getElementById('eye-btn');
  inp.type = inp.type === 'password' ? 'text' : 'password';
  btn.textContent = inp.type === 'password' ? 'üëÅ' : 'üôà';
}

document.getElementById('api-key-input').addEventListener('keydown', e => { if(e.key==='Enter') saveKey(); });

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showToast(msg, ms=2500) {
  const t = document.getElementById('toast');
  t.textContent = msg; t.classList.add('show');
  clearTimeout(t._t);
  t._t = setTimeout(() => t.classList.remove('show'), ms);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PWA INSTALL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let deferredPrompt = null;
window.addEventListener('beforeinstallprompt', e => {
  e.preventDefault(); deferredPrompt = e;
  document.getElementById('install-banner').classList.add('show');
});
window.addEventListener('appinstalled', () => { dismissInstall(); showToast('‚úÖ App installed!'); });
async function doInstall() {
  if (!deferredPrompt) return;
  deferredPrompt.prompt(); await deferredPrompt.userChoice;
  deferredPrompt = null; dismissInstall();
}
function dismissInstall() { document.getElementById('install-banner').classList.remove('show'); }
window.addEventListener('offline', () => showToast('üìµ Offline'));
window.addEventListener('online',  () => showToast('‚úÖ Back online'));

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TAB NAV ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function switchTab(tab) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('panel-'+tab).classList.add('active');
  document.getElementById('nav-'+tab).classList.add('active');
  document.getElementById('scroll').scrollTo({top:0,behavior:'smooth'});
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GEMINI API ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
 const GEMINI_TEXT = 'https://generativelanguage.googleapis.com/v1/models/gemini-2.5-flash:generateContent';
const GEMINI_VISION = GEMINI_TEXT;

async function callGemini(prompt, imageParts) {
  const key = getKey(); // make sure getKey() returns your API key
  if (!key) { 
    showSetup(); 
    throw new Error('no_key'); 
  }

  // Combine image parts (if any) with text prompt
  const parts = [];
  if (imageParts) parts.push(...imageParts);
  parts.push({ text: prompt });

  // Decide which endpoint to use
  const endpoint = imageParts && imageParts.length > 0 ? GEMINI_VISION : GEMINI_TEXT;

  let res;
  try {
    res = await fetch(`${endpoint}?key=${key}`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-goog-api-key': key
      },
      body: JSON.stringify({
        contents: [{ parts }],
        generationConfig: { maxOutputTokens: 1024, temperature: 0.7 },
        safetySettings: [
          { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_NONE" },
          { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_NONE" },
          { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_NONE" },
          { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_NONE" }
        ]
      })
    });
  } catch(e) {
    throw new Error('üåê Network error ‚Äî check your internet connection.');
  }

  let data;
  try { data = await res.json(); } catch(e) { throw new Error('‚ö†Ô∏è Server error ‚Äî please try again.'); }

  if (!res.ok || data.error) {
    const code = data.error?.code || res.status;
    const msg = data.error?.message || '';
    if (code === 429 || msg.includes('quota') || msg.includes('exhausted')) 
      throw new Error('‚è≥ Daily limit reached ‚Äî get a new key or wait till midnight IST.');
    if (code === 400) throw new Error('üîë Invalid API key ‚Äî check your key.');
    if (code === 403) throw new Error('üîë API key not authorized.');
    throw new Error('‚ö†Ô∏è ' + (msg || 'Unknown error ‚Äî please try again.'));
  }

  return data.candidates?.[0]?.content?.parts?.[0]?.text || 'No response.';

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê WEATHER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function fetchWeather(locOverride) {
  if (!getKey()) { showSetup(); return; }
  const loc = locOverride || document.getElementById('w-loc').value.trim();
  if (!loc) { showToast('üìç Enter a location first'); return; }

  const loader = document.getElementById('w-loader');
  const result = document.getElementById('w-result');
  loader.classList.add('on'); result.innerHTML = '';

  try {
    const today = new Date().toLocaleDateString('en-IN',{weekday:'long',year:'numeric',month:'long',day:'numeric'});
    const langNote = currentLang !== 'en' ? `Respond in ${currentLang} language for descriptive text.` : '';
    const text = await callGemini(
      `Generate a realistic weather report for: ${loc}. Today: ${today}. ${langNote}
Return ONLY valid JSON with no markdown, no extra text:
{"location":"City, Country","current":{"temp_c":28,"feels_like":31,"condition":"Partly Cloudy","emoji":"‚õÖ","humidity":72,"wind_kmh":14,"uv_index":7,"visibility_km":10,"pressure_hpa":1013},"forecast":[{"day":"MON","emoji":"‚òÄÔ∏è","high":31,"low":24},{"day":"TUE","emoji":"üåß","high":27,"low":22},{"day":"WED","emoji":"‚õÖ","high":29,"low":23},{"day":"THU","emoji":"üå§","high":30,"low":24},{"day":"FRI","emoji":"‚òÄÔ∏è","high":33,"low":25}],"agri_tip":"One practical farming tip for this weather."}`
    );
    const clean = text.replace(/```json|```/g,'').trim();
    const startIdx = clean.indexOf('{');
    const endIdx = clean.lastIndexOf('}');
    renderWeather(JSON.parse(clean.substring(startIdx, endIdx+1)));
  } catch(e) {
    if (e.message !== 'no_key')
      result.innerHTML = `<div class="agri-tip" style="color:#e07070;border-color:rgba(224,112,112,.3)">${e.message}<br><button class="retry-btn" onclick="fetchWeather()">üîÑ Try Again</button></div>`;
  } finally { loader.classList.remove('on'); }
}

function renderWeather(d) {
  const c = d.current;
  const fc = d.forecast.map(f=>`<div class="fc-day"><div class="fc-d">${f.day}</div><div class="fc-i">${f.emoji}</div><div class="fc-h">${f.high}¬∞</div><div class="fc-l">${f.low}¬∞</div></div>`).join('');
  document.getElementById('w-result').innerHTML=`
    <div class="weather-hero">
      <div class="w-emoji">${c.emoji}</div>
      <div class="w-temp">${c.temp_c}¬∞C</div>
      <div class="w-cond">${c.condition}</div>
      <div class="w-loc">üìç ${d.location} ¬∑ Feels ${c.feels_like}¬∞C</div>
    </div>
    <div class="stats-grid">
      <div class="stat-box"><div class="stat-lbl">${currentLang==='hi'?'‡§®‡§Æ‡•Ä':'Humidity'}</div><div class="stat-val">${c.humidity}%</div></div>
      <div class="stat-box"><div class="stat-lbl">${currentLang==='hi'?'‡§π‡§µ‡§æ':'Wind'}</div><div class="stat-val">${c.wind_kmh}</div></div>
      <div class="stat-box"><div class="stat-lbl">UV</div><div class="stat-val">${c.uv_index}</div></div>
      <div class="stat-box"><div class="stat-lbl">${currentLang==='hi'?'‡§¶‡•É‡§∂‡•ç‡§Ø‡§§‡§æ':'Visibility'}</div><div class="stat-val">${c.visibility_km}km</div></div>
      <div class="stat-box"><div class="stat-lbl">${currentLang==='hi'?'‡§¶‡§¨‡§æ‡§µ':'Pressure'}</div><div class="stat-val">${c.pressure_hpa}</div></div>
      <div class="stat-box"><div class="stat-lbl">Today</div><div class="stat-val" style="font-size:19px">${c.emoji}</div></div>
    </div>
    <div class="section-hdr">5-Day Forecast</div>
    <div class="forecast-scroll">${fc}</div>
    <div class="agri-tip"><strong>üåæ Tip:</strong> ${d.agri_tip}</div>`;
}

async function useGPS() {
  if (!navigator.geolocation) { showToast('GPS not supported'); return; }
  showToast('üì° Getting location...');
  navigator.geolocation.getCurrentPosition(
    pos => { const l=`${pos.coords.latitude.toFixed(4)},${pos.coords.longitude.toFixed(4)}`; document.getElementById('w-loc').value=l; fetchWeather(l); },
    () => showToast('‚ö†Ô∏è Location denied ‚Äî please allow location access')
  );
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SOIL MODE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function setSoilMode(mode) {
  const isCam = mode==='camera';
  document.getElementById('soil-cam-mode').style.display    = isCam?'block':'none';
  document.getElementById('soil-manual-mode').style.display = isCam?'none':'block';
  document.getElementById('mode-cam-btn').classList.toggle('active', isCam);
  document.getElementById('mode-manual-btn').classList.toggle('active', !isCam);
  document.getElementById('s-result').classList.remove('on');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SOIL MANUAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function analyzeSoil() {
  const ph=document.getElementById('s-ph').value, m=document.getElementById('s-moist').value,
        n=document.getElementById('s-n').value, p=document.getElementById('s-p').value,
        k=document.getElementById('s-k').value, ty=document.getElementById('s-type').value,
        cr=document.getElementById('s-crop').value;
  if([ph,m,n,p,k].filter(Boolean).length<2){showToast('Enter at least 2 readings');return;}
  const loader=document.getElementById('s-loader'), result=document.getElementById('s-result');
  loader.classList.add('on'); result.classList.remove('on');
  const langNote = currentLang!=='en'?`Respond in ${currentLang} language.`:'';
  try {
    const text=await callGemini(`You are an expert agronomist. Analyze this soil data. ${langNote}\npH:${ph||'‚Äî'}\nMoisture:${m||'‚Äî'}%\nN:${n||'‚Äî'}mg/kg\nP:${p||'‚Äî'}mg/kg\nK:${k||'‚Äî'}mg/kg\nType:${ty||'‚Äî'}\nCrop:${cr||'‚Äî'}\n\nGive a detailed report:\nüî¨ SOIL HEALTH OVERVIEW\nüìä PARAMETER ANALYSIS\n‚ö†Ô∏è KEY ISSUES\n‚úÖ RECOMMENDATIONS\nüåæ CROP SUITABILITY\nPlain text only.`);
    result.textContent=text; result.classList.add('on');
  } catch(e) {
    if(e.message!=='no_key'){result.innerHTML=e.message+'<br><button class="retry-btn" onclick="analyzeSoil()">üîÑ Try Again</button>';result.classList.add('on');}
  } finally{loader.classList.remove('on');}
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SOIL CAMERA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let soilB64=null, soilMime='image/jpeg', soilStream=null, soilFacing='environment';

function onSoilFile(e) {
  const f=e.target.files[0]; if(!f) return;
  soilMime=f.type||'image/jpeg';
  const r=new FileReader();
  r.onload=ev=>{soilB64=ev.target.result.split(',')[1];setSoilPrev(ev.target.result,'üìÅ Photo uploaded');};
  r.readAsDataURL(f);
}
function setSoilPrev(src,lbl) {
  const img=document.getElementById('soil-preview'), s=document.getElementById('soil-src');
  img.src=src; img.style.display='block'; s.textContent=lbl; s.style.display='block';
  document.getElementById('soil-cam-btn').disabled=false;
  document.getElementById('s-result').classList.remove('on');
}
async function openSoilCam() {
  try {
    soilStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:soilFacing,width:{ideal:1280},height:{ideal:960}},audio:false});
    document.getElementById('soil-vid').srcObject=soilStream;
    document.getElementById('soil-cam-modal').classList.add('open');
    document.body.style.overflow='hidden';
  } catch{showToast('‚ö†Ô∏è Camera unavailable ‚Äî use Upload instead');}
}
function closeSoilCam() {
  if(soilStream){soilStream.getTracks().forEach(t=>t.stop());soilStream=null;}
  document.getElementById('soil-cam-modal').classList.remove('open');
  document.body.style.overflow='';
}
async function flipSoilCam() {
  soilFacing=soilFacing==='environment'?'user':'environment';
  if(soilStream) soilStream.getTracks().forEach(t=>t.stop());
  try{soilStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:soilFacing},audio:false});document.getElementById('soil-vid').srcObject=soilStream;}
  catch{soilFacing=soilFacing==='environment'?'user':'environment';}
}
function snapSoil() {
  const vid=document.getElementById('soil-vid'), cnv=document.getElementById('soil-canvas');
  cnv.width=vid.videoWidth; cnv.height=vid.videoHeight;
  cnv.getContext('2d').drawImage(vid,0,0);
  const m=document.getElementById('soil-cam-modal');
  m.style.background='#fff'; setTimeout(()=>m.style.background='#000',100);
  const url=cnv.toDataURL('image/jpeg',.92);
  soilB64=url.split(',')[1]; soilMime='image/jpeg';
  closeSoilCam(); setSoilPrev(url,'üì∑ Captured from camera');
}
async function analyzeSoilImg() {
  if(!soilB64){showToast('Please capture or upload soil image first');return;}
  if(!getKey()){showSetup();return;}
  const crop=document.getElementById('s-crop-cam').value;
  const loader=document.getElementById('s-loader'), result=document.getElementById('s-result');
  loader.classList.add('on'); result.classList.remove('on');
  const langNote=currentLang!=='en'?`Respond in ${currentLang} language.`:'';
  try {
    const text=await callGemini(`You are an expert soil scientist. Analyze this soil image visually. ${langNote}
${crop?'Farmer wants to grow: '+crop:''}
Give a detailed report:
ü™® SOIL TYPE (Clay/Sandy/Loam/Silt/Peat/Chalky)
üé® COLOR ANALYSIS (what the color means for nutrients)
üíß ESTIMATED MOISTURE (Dry/Slightly Moist/Moist/Wet)
üåø ORGANIC MATTER (Low/Medium/High)
‚ö†Ô∏è VISIBLE ISSUES (compaction, erosion, crust, discoloration)
‚úÖ RECOMMENDATIONS (how to improve)
üåæ BEST CROPS (top 5 crops for this soil)
Plain text only.`,[{inline_data:{mime_type:soilMime,data:soilB64}}]);
    result.textContent=text; result.classList.add('on');
  } catch(e) {
    if(e.message!=='no_key'){result.innerHTML=e.message+'<br><button class="retry-btn" onclick="analyzeSoilImg()">üîÑ Try Again</button>';result.classList.add('on');}
  } finally{loader.classList.remove('on');}
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PLANT CAMERA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let plantB64=null, plantMime='image/jpeg', plantStream=null, plantFacing='environment';

function onPlantFile(e) {
  const f=e.target.files[0]; if(!f) return;
  plantMime=f.type||'image/jpeg';
  const r=new FileReader();
  r.onload=ev=>{plantB64=ev.target.result.split(',')[1];setPlantPrev(ev.target.result,'üìÅ Photo uploaded');};
  r.readAsDataURL(f);
}
function setPlantPrev(src,lbl) {
  const img=document.getElementById('plant-preview'), s=document.getElementById('plant-src');
  img.src=src; img.style.display='block'; s.textContent=lbl; s.style.display='block';
  document.getElementById('p-btn').disabled=false;
  document.getElementById('p-result').classList.remove('on');
}
async function openPlantCam() {
  try {
    plantStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:plantFacing,width:{ideal:1280},height:{ideal:960}},audio:false});
    document.getElementById('plant-vid').srcObject=plantStream;
    document.getElementById('plant-cam-modal').classList.add('open');
    document.body.style.overflow='hidden';
  } catch{showToast('‚ö†Ô∏è Camera unavailable ‚Äî use Upload instead');}
}
function closePlantCam() {
  if(plantStream){plantStream.getTracks().forEach(t=>t.stop());plantStream=null;}
  document.getElementById('plant-cam-modal').classList.remove('open');
  document.body.style.overflow='';
}
async function flipPlantCam() {
  plantFacing=plantFacing==='environment'?'user':'environment';
  if(plantStream) plantStream.getTracks().forEach(t=>t.stop());
  try{plantStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:plantFacing},audio:false});document.getElementById('plant-vid').srcObject=plantStream;}
  catch{plantFacing=plantFacing==='environment'?'user':'environment';}
}
function snapPlant() {
  const vid=document.getElementById('plant-vid'), cnv=document.getElementById('plant-canvas');
  cnv.width=vid.videoWidth; cnv.height=vid.videoHeight;
  cnv.getContext('2d').drawImage(vid,0,0);
  const m=document.getElementById('plant-cam-modal');
  m.style.background='#fff'; setTimeout(()=>m.style.background='#000',100);
  const url=cnv.toDataURL('image/jpeg',.92);
  plantB64=url.split(',')[1]; plantMime='image/jpeg';
  closePlantCam(); setPlantPrev(url,'üì∑ Captured from camera');
}
async function analyzePlant() {
  if(!plantB64){showToast('Please capture or upload plant image first');return;}
  if(!getKey()){showSetup();return;}
  const ctx=document.getElementById('p-ctx').value;
  const loader=document.getElementById('p-loader'), result=document.getElementById('p-result');
  loader.classList.add('on'); result.classList.remove('on');
  const langNote=currentLang!=='en'?`Respond in ${currentLang} language.`:'';
  try {
    const text=await callGemini(`You are an expert plant pathologist. ${langNote}
${ctx?'Context: '+ctx:''}
Analyze this plant image:
üåø PLANT IDENTIFICATION
üîç VISUAL OBSERVATIONS
ü©∫ DIAGNOSIS (Mild/Moderate/Severe)
ü¶† LIKELY CAUSES
üíä TREATMENT PLAN (organic + chemical options)
üõ°Ô∏è PREVENTION
Plain text only.`,[{inline_data:{mime_type:plantMime,data:plantB64}}]);
    result.textContent=text; result.classList.add('on');
  } catch(e) {
    if(e.message!=='no_key'){result.innerHTML=e.message+'<br><button class="retry-btn" onclick="analyzePlant()">üîÑ Try Again</button>';result.classList.add('on');}
  } finally{loader.classList.remove('on');}
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê INIT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
window.addEventListener('load', () => {
  applyTranslations();
  if (!getKey()) showSetup();
});
document.addEventListener('touchmove', e=>{ if(e.touches.length>1) e.preventDefault(); },{passive:false});
</script>
</body>
</html>
